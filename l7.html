<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8" />
    <title>Түстер (Colors)</title>
    <link rel="stylesheet" href="lstyle.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="images/icons/Lessons.png" type="image/x-icon">
</head>
<body>
    <table class="top-table">
        <tr>
            <th><a href="index.html"><img src="images/icons/Home.png" alt="Homepage" class="center"></a></th>
            <th><a href="lessons.html"><img src="images/icons/Lessons.png" alt="Lessons" class="center"></a></th>
            <th><a href="flashcards.html"><img src="images/icons/Flashcardsicon.png" alt="Flashcards" class="center"></a></th>
            <th><a href="grammar.html"><img src="images/icons/Grammar.png" alt="Grammar" class="center"></a></th>
            <th><a href="resources.html"><img src="images/icons/resources.png" alt="Resources" class="center"></a></th>
        </tr>
    </table>

    <div class="content">
        <h1>Түстер (Colors)</h1>
        <p>Before starting the exercises, review these lessons: 
            <a href="flashcard6.html">Colors</a>
            <a href="grammar7.html">Adjectives</a> 
        </p>

        <h2>1.</h2>
        <p>Listen to the audio and select the correct color:</p>
        <audio controls>
            <source src="audio/red.mp3" type="audio/mpeg">
        </audio>
        <div>
            <button onclick="checkListening('Қызыл')">Red</button>
            <button onclick="checkListening('Көк')">Blue</button>
            <button onclick="checkListening('Сары')">Yellow</button>
        </div>
        <p id="listeningResult"></p>

        <h2>2.</h2>
        <p>Record yourself saying the color in Kazakh. Click Start, speak, then Stop to listen:</p>
        <button onclick="startRecording()">Start Recording</button>
        <button onclick="stopRecording()">Stop Recording</button>
        <audio id="recordedAudio" controls></audio>

        <h2>3.</h2>
        <p>Match the Kazakh colors to the English names:</p>
        <table>
            <tr>
                <th>Kazakh</th>
                <th>English</th>
            </tr>
            <tr>
                <td>Қызыл</td>
                <td>
                    <select>
                        <option value="">Select</option>
                        <option value="correct">Red</option>
                        <option value="wrong">Blue</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Жасыл</td>
                <td>
                    <select>
                        <option value="">Select</option>
                        <option value="correct">Green</option>
                        <option value="wrong">Yellow</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>Көк</td>
                <td>
                    <select>
                        <option value="">Select</option>
                        <option value="correct">Blue</option>
                        <option value="wrong">Black</option>
                    </select>
                </td>
            </tr>
        </table>
        <button onclick="checkReading()">Check Answers</button>
        <p id="readingResult"></p>

        <h2>4.</h2>
        <p>Translate this sentence into Kazakh: "Red apple"</p>
        <input type="text" id="writingInput" placeholder="Type your answer here">
        <button onclick="checkWriting()">Check</button>
        <p id="writingResult"></p>
    </div>

    <script>
        function checkListening(color) {
            const result = document.getElementById('listeningResult');
            if(color === 'Қызыл') {
                result.textContent = 'Дұрыс!';
                result.style.color = 'green';
            } else {
                result.textContent = 'Қате, қайта көріңіз.';
                result.style.color = 'red';
            }
        }

        let mediaRecorder;
        let audioChunks = [];

        async function startRecording() {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.start();
            audioChunks = [];

            mediaRecorder.addEventListener('dataavailable', event => {
                audioChunks.push(event.data);
            });

            mediaRecorder.addEventListener('stop', () => {
                const audioBlob = new Blob(audioChunks);
                const audioUrl = URL.createObjectURL(audioBlob);
                document.getElementById('recordedAudio').src = audioUrl;
            });
        }

        function stopRecording() {
            mediaRecorder.stop();
        }

        function checkReading() {
            const selects = document.querySelectorAll('table select');
            let correctCount = 0;
            selects.forEach(s => {
                if(s.value === 'correct') correctCount++;
            });
            const result = document.getElementById('readingResult');
            if(correctCount === selects.length) {
                result.textContent = 'All answers are correct!';
                result.style.color = 'green';
            } else {
                result.textContent = `You got ${correctCount} out of ${selects.length} correct. Try again!`;
                result.style.color = 'red';
            }
        }

        function checkWriting() {
            const input = document.getElementById('writingInput').value.trim().toLowerCase();
            const correct = "қызыл алма";
            const result = document.getElementById('writingResult');
            if(input === correct) {
                result.textContent = "Дұрыс!";
                result.style.color = "green";
            } else {
                result.textContent = "Қате, қайта көріңіз.";
                result.style.color = "red";
            }
        }
    </script>
</body>
</html>
